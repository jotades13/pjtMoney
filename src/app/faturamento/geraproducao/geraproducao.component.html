<div class="container">
<form #formgera="ngForm">
  <div class="col-12" style="height: 60px;">
    <h1 style="margin-top:10px">Gera Produção</h1>
  </div>

  <div class="grid fat">
    <div class="col-2 p-fluid " >
      <label>Fonte Pagadora</label>
      <input type="text" pInputText name="fontepg" ngModel #fontepg="ngModel">
    </div>
    <div class="col-2 p-fluid " >
      <label>Unidade</label>
      <input type="text" pInputText name="unidade" ngModel #unidade="ngModel">
    </div>
    <div class="col-2 p-fluid" >
      <label>Especialidade</label>
      <input type="text" pInputText name="especialidade" ngModel #especialidade="ngModel">
    </div>
    <div class="col-3 p-fluid" >
      <label>Usuario</label>
      <input type="text" pInputText name="usuario" 
      ngModel #usuario="ngModel">
    </div>
    <div class="col-3 p-fluid">
      Execute sua Pesquisa
      <button type="submit" pButton label="Pesquisa" 
         (click)="consulta(ano.value,mes.value,fontepg.value,unidade.value,especialidade.value,usuario.value)">
      </button>
    </div>
  </div>
  
  <div class="grid fat2">
    
    <div class="col-4">
      <label style="display: block">Informe a Competência </label>
      <p-dropdown [options]="opcaoano" #ano placeholder="Selecione"></p-dropdown>
      <p-dropdown [options]="opcaomes" #mes placeholder="Selecione"></p-dropdown>
    </div>
    
    <div class="col-5 p-fluid">
      <label style="display: block">Gere suas Produções</label>
      <button type="submit" pButton label="Gerar agora"
      (click)="geraproducoes(ano.value,mes.value)"></button>
    </div>
    
  </div>
  
  <p-table [value]="producoes" styleClass="p-datatable-sm" responsiveLayout="scroll" [paginator]="true" [rows]="5" [responsive]="true">
    <ng-template pTemplate="header">
      <tr>
        <th *ngFor="let c of colunas">
          {{c.cabecalho}}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-p>
      <tr>
        <td>{{p.competencia}}</td>
        <td>{{p.descricao}}</td>
        <td>{{p.usuarioGeracao}}</td>
        <td class="col-acoes-content" >
          <button pButton icon="pi pi-user" pTooltip="Muda Usuário" tooltipPosition="top"
            (click)="mudaUsuario(usuario.value,p.competencia,'')">
          </button>
          <a pButton icon="pi pi-pencil" [routerLink]="['/lancavaloresescalas',p.competencia]"></a>
        </td>
      </tr>
    </ng-template>
  </p-table>
  
</form>
  
</div>
